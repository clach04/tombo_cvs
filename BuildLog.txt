■ B001
初期バージョン

■ B002 2000/10/18

・PsPCに特化してIMパネル表示時に画面サイズが変わるように修正。

■ B003 2000/10/20

・二重起動対応
・Cut-Copy-Paste対応
・終了時メモの保存の実行
・Aboutダイアログの実装
・PocketPCのみに対応
・アプリケーションアイコン追加
・Encrypt/Decrypt UIの一部だけ実装(しかけ)

■ B004 2000/10/21

・メモの暗号化・復号化に対応

■ B005 2000/10/22

・MD5とBLOWFISHアルゴリズムの著作権を表示
・片手でツリーの展開縮退、メモのオープン・クローズができるように修正
・プロパティ対応
・トップディレクトリの変更対応
・鍵のFingerPrintの保存対応
・FingerPrintによるパスワードの一致チェック

■ B006 2000/10/26

・ツリーのトップがノードになるように修正
・複数階層開いているツリーを閉じたときのメモリリークを修正
・メモの新規作成時に選択している階層に作成されるように修正
・フォルダの削除再起的(やりかけ)
・著作権表示で名前が切れるミスのFIX
・プロパティにヘルプが表示されないバグのFIX
・アクションボタンで暗号化されたメモを開いた場合にパスワードが間違っているメッセージが出るバグの暫定FIX
・アクションボタンでのツリー開閉時にノードの入れ替えがうまくいかないバグを暫定FIX
・LoadItems()でツリーを削除する際にMemoNoteオブジェクトを開放していないバグをFIX
・フォルダの新規作成
・フォルダの削除(ただしフォルダが空の場合のみ)

■ B007 2000/10/29

・パスワードのFingerPrintの保存をやめる(セキュリテイ上よろしくないと考えられるため)
・暗号化する際にパスワードを2回入力させるように変更
・終了時にパスワード情報クリア
・メニューにパスワードクリアを追加
・メモの取得・保存関連機能をMemoDetailsViewからMemoManagerに移動。MemoDetailsViewは純粋に
  表示のみを行うVIEWオブジェクトに格下げ。
・同名のメモがあった場合、ヘッドライン文字列に数字がつかないバグをFIX
・暗号化時にパスワードが入力できないバグのFIX
・メモファイルの管理機能をMemoNoteに移動(中)
・暗号化時・復号化時に同名のファイルが存在した場合の処理の追加
・ヘッドライン変更時のファイル名の変更

■ B008 2000/10/30

・一定時間操作がない場合にパスワードを自動クリアするように修正
・ファイルを開いた状態で電源を切った場合にタイムアウトしていれば電源ON時に自動的に一覧に戻るように修正
・パスワードタイムアウトプロパティを追加
・暗号化ファイルフォーマットを変更、乱数と平文のMD5SUMを暗号化する領域に含める。これにより暗号化の強度を少し高める。

■ B009 2000/11/04

・メニューバーを整理、コンテキストメニューバーに。
・メモのコピー・移動に対応
・CABファイル用infファイルの作成

■ B010 2000/11/05
Tombo 1.0beta1 for PocketPC

・ツリーの展開方法を若干修正

■ B011 2000/11/12

・ツリーを閉じたフォルダに対してでメモの新規作成やコピーペーストを行った際にフォルダを開くと同じメモが2つ表示されるバグをFIX
・新規メモ作成時にIMをONにするように修正
・一覧ビューに戻る際にIMをOFFにするように修正
・パスワード入力時・新規フォルダ作成時にIMがONになるように修正
・[Win32]パスに'\'が入っていた場合にメモをセーブするとファイル名が化けるバグをFIX
・"XX"→"XXY"のように、元のヘッドラインに何か文字を足すような変更をした場合にファイル名が変わらないバグをFIX
・IMを開いた状態でTOMBOから別のアプリに切替え、IMを閉じて二重起動でTOMBOを呼び出した場合に画面サイズが狂うバグをFIX
・セーブ時に保存するかどうかを聞いてくるダイアログを表示するように修正
	ただし、暗号化メモを開いた状態でタイムアウトした場合の処理に未対応→対応中

■ B012 2000/11/15

・メモを開いた状態でパスワードタイムアウトが発生した場合、別のメモとして保存するように修正
・パスワードタイムアウト時、暗号化メモが開かれていた場合のみ一覧に戻るように修正
・PSPC版対応中
・[PSPC]コマンドバーの実装
・タイマーを使ったパスワードタイムアウト処理を追加
・キャンセルボタンで一覧画面に戻るように修正
・ヘッドライン文字列長の制限を撤廃。でも完全にチェックしきれていない。(over MAX_PATH)

■ B013 2000/11/17

・IMとして手書き入力を使った後にアクションコントロールでツリーやメモの開閉ができなくなるバグをFIX

■ B014 2000/11/19

Tombo 1.0 beta 2

■ B015 2000/12/12

・ヘッドラインサイズによるバッファオーバーラン対応

■ B016 2000/12/21

・メモの移動に失敗するバグのFIX(B015の落ち穂拾い)
・ヘッドラインにタブが入っているとセーブできないバグのFIX(Is*さん報告ありがとうございました)
・バッファオーバーラン対応はまだまだ続く(とほほ..)

■ B017 2001/01/03

・暗号化ファイルオープン時にパスワードが不正の場合、パスワード再入力を促すように修正(Na*さんに感謝!)
・H/PC暫定対応(やりかけ)
	Veloで動かんやん。SDK悪いのか？　許せんMS!
・一覧ビューでのメモのソート(Ze*さん、その他皆さんに感謝!)
・フォントサイズの変更機能(Na*さん、その他皆さんに感謝!)
・メモの保存ボタンの付加(Na*さんに感謝!)

■ B018 2001/01/07

・H/PC用2ペインビューのテストコードを追加。それなりにやることありそう。ベータ4はこの辺が中心になるか??
	・一覧ビューはシングルクリックに
	・保存タイミングの変更
	・サイズの変更対応
	・ショートカット
・カーソル位置保存のテストコードを追加。こちらももう少し仕様の練りが必要。
・ソート機能追加の関係でファイルを書き換えて一覧に戻るとカーソルの位置がずれるバグをFIX
・PocketPC版、メニューの一部をアイコン化

TOMBO 1.0 beta 3

■ B019 2001/02/04

・詳細ビューからESCボタンで一覧ビューに戻れるように修正(H/PC版)
・詳細ビューでのタップ&ホールドメニュー対応(PocketPC版)
・日付の挿入に対応(PocketPC版) (Ma*さんアイデアどうもありがとうございます)
・日付挿入パターンを2パターンに。それぞれについてフォーマットを設定できるように修正。

■ B020 2001/02/14

・一覧ビューにタップ&ホールドメニューを実装(PocketPC版)
・一覧ビューからRETURNキーで詳細ビューに移動できるように修正(H/PC版)
・ABOUTダイアログのバージョン表記をbeta 4に
・メニューにショートカットをつける、キーボードアクセラレータ対応(H/PC版)

■ B021 2001/02/17

・パスワードのvalidation機能。ただしExperimental Impliment (Na*さんアイデアありがとうございます)
・各プロジェクトについて不足しているファイルやリソースを設定

■ B022 2001/02/26

2/24 Data lost.... くぅぅぅぅ。

・開発環境移行に伴い、ダイアログのフォントを修正。

■ B023 2001/03/01

・Ctrl+Mで新規メモのショートカットを作成(Win32版)
・カーソル位置保持機能(除 H/PC1.0) (Tsu*さんにアイデアいただきました)

■ B024 2001/03/10

・PsPC, PocketPCの詳細ビューにおいて、左端の開始位置を3ドット右にずらす処理を追加
	(アンケートでアイデアいただきました)

■ B025 2001/03/11

・パスワードのvalidation機能についてDisableにする
・HTMLによるマニュアルを作成
・SH3版について、最適化オプションを外す

TOMBO 1.0 beta 4

■ B026 2001/12/27

・アプリケーションボタンでメモの開閉ができるように修正

■ B027 2002/01/05

・Win32版バージョン表記を修正
・Win32版2ペインビュー対応中
・拡張子の判定をcase insensitiveに変更

■ B028 2002/01/06

Win32版
・メニュー項目の並べ替え・ビューの切り替えに伴うEnable/Disable化[#5]
・メモを削除した場合に詳細ビューにメモが残る問題のfix[#57]
・修正中のファイルを暗号化/復号化した際に保存を確認するように修正
・呼び出しの関係でSelectView, DetailsViewのWndProcをC++に
・#5対応に伴い、フォーカスをハンドルするように修正
・TreeViewにTVS_SHOWSELALWAYSスタイルを付加

■ B029 2002/01/11

Win32版
・ツールバーの付加
・ステータスバーの付加
・カーソルキーの移動に伴いメモが切り替えることができるように修正
・シングルクリックでメモが開くことができるように修正
・ウィンドウサイズ・2ペインそれぞれのサイズを保存
・暗号化メモを閉じた際に詳細ビューをクリアするように修正
・選択しているメモによりメニューの暗号化・復号化をenable/disableするように修正
・二重起動時にメモが最前面に来るように修正
・リターンキーでツリーが開閉できるように修正

■ B030 2002/01/14

共通
・ログ吐き関数を付加
・メモが存在しないフォルダにメモを追加したとき、メモが表示できないバグのFIX

PocketPC版
・ダイアログが出ているときにアクションキーを無効化
・アプリボタンの割り当てを設定できるようにプロパティを追加
・タップ&ホールドメニューが出た状態でビューを切り替えた場合、メニューが消えるように修正

Win32版
・ステータスバーに新規メモ稼動かを表示するように修正
・DELキーでメモを削除できるように修正

PsPC版
・一覧ビュー/詳細ビューについてサブクラス化を行わないように修正

HPC版
・DELキーでメモを削除できるように修正

Tombo 1.0 for WinCE beta5
Tombo 1.0 for Win32 beta1

■ B031 2002/05/03

共通
・編集メニューに全選択を追加(キーボードショートカットは未)

CE版共通
・KCTRL.DLL依存部分の除去

Win32版
・ペインを右端に寄せた際に戻せなくなるバグのfix
・WinXPで一覧・詳細ビューウィンドウの枠線を出さないように修正
・詳細ビュー折り返し表示のメニューの付加(メニューだけ)

■ B032 2002/05/04

共通
・ショートカットの見直し・追加
・新規メモ作成のショートカットをCtrl+MからCtrl+Nに変更

Win32版
・シングルクリックモード/カーソル追従モードに固定
	→処理が複雑になる割りにメリットが見えないため
・別のメモを選択した際に保存ダイアログでキャンセルが効かない
・変更後、ESCキーで戻る際に保存ダイアログでNOを選択しても編集が破棄されない

PocketPC版
・ESC/RETURNでビューが切り替わるように修正
・ショートカットの追加

■ B033 2002/05/06

共通
・詳細ビューでタブストップ位置を設定できるように修正
・折り返し表示を切り替えられるように修正

■ B044 2002/05/09

H/PC 2Paneとりあえず動いている版

ESCキーでの戻りの挙動が若干変

■ B045 2002/05/09

H/PC版FIX

H/PC, Win32版
・詳細ビュー選択状態から該当メモの一覧ビューアイテムを選択時、暗号化/復号化メニューがグレイアウトのままだったのを修正

H/PC版
・アイコンが表示されるように修正
・折り返しの切り替えを行った際にメニューのチェックが外れない問題の修正
・詳細ビューからESCキーで戻った際に、メモの保存を行うとフォーカスがどこかにいってしまう問題の修正
・ペインのサイズが保存されない問題の修正

■ B046 2002/05/10

l'agenda対応

l'agenda版

・プラットフォーム定義用マクロ PLATFORM_BE500 を追加
・SIP関連処理をl'agendaにも対応
・プロパティ保存時にFLUSHメモリへの書き込み処理を追加
・メモのデフォルトディレクトリをAPIから取得するように変更

■ B047 2002/05/10

l'agenda版
・CommandBarをCSOBarに置き換え

Tombo 1.0 beta 6

■ B048 2002/05/22

共通
・ビットマップファイルの整理・統合
・日付入力をボタンとして配置

l'agenda版
・ボタンを配置
・保存ボタンの面をビットマップに張替え

Win32版/PocketPC版
・メモのタイトルをウィンドウのタイトルに表示するように修正

Win32版/HPC版
・ツールバー/コマンドバーのボタンをビューの状態によって制御するように修正

PocketPC版
・ツールチップを実装

■ B049 2002/05/26

l'agenda版
・Cut/Copy/Pasteボタンを追加

H/PC版/Win32版
・１Pane/2Pane切り替えモードを実装

CE版
・メインウィンドウの背景色をグレーに
	(H/PC版の2Pane間の柱がグレーになる)

RELEASE : Tombo 1.0

■ B050 2002/06/04

Win32版
・ルートフォルダに'D:'など、ドライブ直下が指定できないバグのfix

共通
・フォントサイズを変更した際にタブストップ位置が狂うバグのfix

PsPC,PocketPC版
・左端にグレーの線が表示されるバグのfix

■ B051 2002/06/16

・TreeViewItemを作成
・詳細ツリービューのTV_ITEMのlParamについて、MemoNoteからTreeViewItemに変更
・これにともない、これまでNULLだったディレクトリのlParamについても常にTreeViewItemを持つように修正
・アイコンの情報はTreeViewItemから取得するように修正
・メモのEncrypt,Decrypt,Copy,Move,Delete処理をMemoManagerからTreeViewItemに移動
・フォルダのDelete処理をMemoSelectViewからTreeViewItemに移動。ただし、まだMemoManager::DeleteFolderに依存している。再帰的な削除はまだ。
・TreeViewFolderItemにCopy, Moveを実装

■ B052 2002/06/19

・DirectoryScannerをTemplate Methodパターンに変更
・DirectoryのCopy/Delete処理をMemoFolderに移動
・MemoManager::DeleteFolderを削除
・挿入時の比較をアイコンの種別で比較するのをやめ、アイテムの種類で比較するように修正
・メモを開いた際にウィンドウタイトルを変更するかしないかを選択できるように修正

■ B053 2002/06/23

・名前変更に対応
	・一覧ビューにTVS_EDITLABELSとそれに関連する処理を追加
	・一覧ビューのDELETEキーの処理をアクセラレータからサブクラスに移動。アクセラレータだと名前の変更中にDELキーで削除にいってまうため
	・PocketPC版でタップするだけで編集状態になってしまう現象回避のために一覧ビューのTap&Hold処理をSelectViewWndProcからMemoSelectViewに移動。

■ B054 2002/07/13

・名前変更の可否をプロパティで設定できるように修正
・名前変更でファイルが保存できない場合があったのを修正
・PocketPC版でタップするとメモ名変更になっていたバグをfix
・検索機能(ページ内、順方向)を追加
・正規表現対応コードについてはコメントとして残す

■ B055(EXP) 2002/08/03

・ファイルに対して直接検索をかけるように修正
・ページ内逆方向検索を追加
・メニューに検索ボタンを付加
・メモ縦断検索を実装(順方向/逆方向)
・正規表現対応コード消す
・暗号化メモを検索対象とする/しないを選択できるように修正
・プロパティで存在しないディレクトリが指定された場合にディレクトリを作成するように修正(Win32版)

■ B056(REL) 2002/08/04

Tombo 1.1

・ダイアログ中のレイアウトの変更(H/PC版)
・CommandBar → CommandBandに変更(H/PC版)
	これに伴い、終了時のBandの位置についても保存するように修正
・PsPC版ボタンを追加
・BE500版ボタンの調整
・CE 2.11用にstrnicmp等価ルーチンを実装

■ B057(EXP) 2002/08/25

・GNU regexライブラリの組み込み
	順方向検索/逆方向検索
	case sensitive/insensitive検索
	fastmapを使用するように実装
	メモリ確保・開放を別ヒープとして実装
		→LocalReAllocだとメモリサイズの変更に失敗するため。メモリのフラグメンテーションの問題？ 
			メッセージ処理時に他の部分でLocalAllocしているため??

・とりあえずWin32版は動く
・WCHAR版の検索ルーチンは未のため、CE版は正常動作せず

■ B058(REL) 2002/08/30

TOMBO 1.2 beta 1

・CE上で動くようにMemoDetailsViewの検索ルーチンを修正
	→ちょっと効率悪い。が、一応動く
	※ TOMBO 1.1比でほとんど変わらないためこのままいく
・CE2.11環境用にis*系互換ルーチンを実装
・BE500でstddef.hをインクルードしないようにregex.[ch]を修正
・allocaが全プラットフォームに存在することを確認、RE_TALLOCをallocaに戻す
・LocalReallocにLMEM_MOVEABLEを設定し、Heapからの確保を行わない形に修正
・パターンコンパイル失敗時にメッセージを出すようにした。但し英語
・Win32版でAccess Violationを起こしていたmallocaの宣言を修正、allocaのダミーの定義をやめて
  config.hでちゃんとmalloc.hを呼ぶように変更
・Aboutダイアログの著作権表示方法を修正。staticで貼り付けるのをやめ、EDITBOX中に表示するように修正。
・ドキュメントの更新

■ B059(REL) 2002/09/12

・コード中に埋め込んだ文字列をMessage.hに集約(リソースはまだ)
・AboutBoxのCopyright表記のずれを修正(PocketPC)
・AboutBoxを開くとEDITBOX内の文字列が選択されてしまっているのを修正(TABSTOPを外した)
・メニューに「名前を変更」を追加
・SearchEngineWをソース上から削除
・ルートノードに対してラベル名を変更しようとした場合無視するように修正
・検索対象をファイル名のみに絞るオプションを付加

■ B060(REL) 2002/09/13

・コマンドバーを2段にした場合、ボタンの有効・無効の切り替えが動作しないバグのfix(H/PC)
・メモフォルダを'\'に指定した場合にエラーメッセージを出力するように修正(CE版)
・検索時メモリの二重開放を行っていたバグをfix
・フォルダ選択ダイアログをコンボボックスに変更。履歴を表示するように修正

■ B061(REL) 2002/09/14

・リソースの英語化
・英語版ビルド設定
・メニューからだと詳細ビューにいても2画面モードの切り替えができてしまっていたバグをFIX
・日付挿入設定ダイアログの説明文をフォーム上からMessage.hに引越し
・フォルダ選択ダイアログ上でネットワークドライブについても表示するように修正

☆ TOMBO 1.2

■ B062(REL) 2002/09/16

・H/PC英語版でメッセージが正しく英語化されていないバグをFIX(とほほ...)
・"折りたたみ"の英訳をFoldingからWrap Textに変更

☆ TOMBO 1.2.1(英語版のみリリース)

■ B063(EXP) 2002/09/23

・IDC_TOPFOLDER(フォルダ選択ダイアログ中)に"水平オートスクロール"を設定。文字数制限を解除。
・英語版メッセージを修正
・バージョンアップ時(レジストリのTopDirHistoryが存在しない状態)にプロパティを開いた際、
  フォルダ選択のダイアログがブランクの場合にはTopDirから値を取得・設定するように修正。
・カーソル位置の保存をMemoManager::SaveIfModifyで行うように修正。
・メモが編集されていなくてもカーソル位置だけは保存するように修正。
・オプションでファイル名とヘッドラインを連動させない設定をした際でも暗号化・複合化時には
  ヘッドラインからファイル名を決めていたバグをFIX

■ B064(REL) 2002/09/23

・FileSelectorでGetDriveType後のTreeView_Insertで失敗した際にメッセージを出すように修正
・Src/regex/でctypeutil.[ch]をソースツリーに組み込み忘れていたので組み込んだ
・ドキュメントの整備
・ビルドプログラムもどきの作成

☆ TOMBO 1.3

■ B065 2002/10/05

・CVSへの移行を睨んでビットマップ・アイコンをSrc/imageの下に移動。
・H/PC版についてCut/Copy/Pasteをキーボードアクセラレータに追加
	通常EDITBOXコントロールが自前で処理するのだが、モバイルギアでカナ入力モードの際には
	正しく処理されないらしい。

== ソース管理をローカルのVSSからSFのCVSに移行 ==

■ B066 2002/10/06

* BE300版を作成。BE500版をBE300用SDK+TOMBO_LANG_ENGLISHつきでビルドしたもの
* #577,#620 FileSelectorについてSHBrowseForFolderを使うように修正(Win32版)
* #587 フォルダ名の変更ができないバグをFIX
* #586 Set Icons to transparent.(Win32/HPC)
* #648 Add "Find" Button on toolbar(Win32/HPC/BE300/BE500/PocketPC)
  Because there are no space, BE-[35]00/PocketPC are place select view only.

■ B067 2002/10/13

PG: Add virtual folder Icon.
PG: MainFrame::RequestOpenMemo's parameter changed: MemoNote to TreeViewFileItem.
PG: lParam changed on message MWM_OPEN_REQUEST: MemoNote to TreeViewFileItem.
PG: Change links MemoManager to MemoNote: Memomanager not points MemoNote but points TreeViewItem now.

■ B068 2002/10/14

PG: Delete not used function MemoSelectView::SelectNote.
PG: Delete not used function MemoSelectView::GetHeadLine.
PG: Merge TreeViewFileItem::hItem and TreeViewFolderItem::hItem to TreeViewItem::hItem

■ B069 2002/10/19

PG: Move InsertFile from static to MemoSelectView::InsertFile.
PG: Move InsertFolder from static to MemoSelectView::InsertFolder.
PG: Move LoadNodeUnderItem from MemoSelectView to TreeViewFolderItem.

* impliment virtual folder feature.

PG: add VFStream.* TSParser.* as virtual folder classes.
PG: chagne 1st argument of MemoSelectView::GeneratePath

■ B070 2002/10/27

* FIX: #665,#690 Error when edit closed-notes.
* FIX: A memo under a folder can't open after renaming the folder that is opened.

PG: if "#vfolder.txt" not exists, disable show virtual folder root node.
PG: Merge InsertFileToLast and InsertFile.
PG: Deleting tree view item are moved from TreeViewItem to MemoSelectView.
PG: Creating MemoNote are moved to factory method.
PG: Notify MemoSelectView to MemoManager when insert/delete nodes.
PG: Keep HTREEITEM in MemoManager for support notify.
PG: lParam changed on message MWM_OPEN_REQUEST: TreeViewFileItem to MemoLocator.

TODO: 

●PostMessageしている部分についてSendMessageでOKかの確認(統一したい)
●PostMessage時のMemoLocatorのメモリリーク

== around virtual folder

ストリームで暗号化メモを扱えるようにする
メモの取得をMemoNoteのメソッドで行うようにする
Change icon at virtual node.
Disable Cut/Copy/Paste/Disable/Encrypt/Decrypt etc. when virtual node selected.
matchフィルタの追加
スクリプトコンパイルエラー処理
TSファイル指定Property I/F
ツリーへの挿入時のソート

== entire

メニューEnable/Disableの見直し・整理
MemoInfoについてMemoManager管理からMemoNote管理になるように修正する
OpenRequestをMemoSelectViewからTreeViewItemに移動
MemoManager::MakeNewFolderをどーにかする

